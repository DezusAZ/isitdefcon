; PlatformIO Configuration for M5Stack CoreS3 SE Projects
;
; This file provides a working template for CoreS3 SE development
; with LAN Module 13.2 (W5500) Ethernet support.
;
; Place this file as platformio.ini in your project root.

[platformio]
; Default environment - change as needed
default_envs = m5stack-cores3-se

; ============================================================================
; M5Stack CoreS3 SE Environment
; ============================================================================
[env:m5stack-cores3-se]
platform = espressif32
board = m5stack-cores3
framework = arduino

; Serial monitor
monitor_speed = 115200

; Build flags
build_flags =
    -DARDUINO_M5STACK_CORES3
    -DBOARD_HAS_PSRAM
    -DARDUINO_USB_CDC_ON_BOOT=1
    ; Uncomment for faster builds (but larger binary)
    ; -Os

; Library dependencies
lib_deps =
    ; Core M5Stack libraries
    m5stack/M5Unified @ ^0.1.16
    m5stack/M5GFX @ ^0.1.16

    ; Ethernet (choose one based on your needs)
    m5stack/M5_Ethernet @ ^4.0.0
    ; OR for LAN Module 13.2:
    ; https://github.com/m5stack/M5Module-LAN-13.2.git

    ; HTTP client
    arduino-libraries/ArduinoHttpClient @ ^0.6.1

    ; JSON parsing (optional)
    bblanchon/ArduinoJson @ ^7.0.0

; Upload settings
upload_speed = 921600

; Partition scheme - use 16MB variant
board_build.partitions = default_16MB.csv

; ============================================================================
; Development Environment (with debug output)
; ============================================================================
[env:m5stack-cores3-se-debug]
extends = env:m5stack-cores3-se

build_flags =
    ${env:m5stack-cores3-se.build_flags}
    -DCORE_DEBUG_LEVEL=4
    -DLOG_LOCAL_LEVEL=ESP_LOG_DEBUG

; ============================================================================
; Production Environment (optimized)
; ============================================================================
[env:m5stack-cores3-se-release]
extends = env:m5stack-cores3-se

build_flags =
    ${env:m5stack-cores3-se.build_flags}
    -Os
    -DCORE_DEBUG_LEVEL=0

; ============================================================================
; Notes
; ============================================================================
;
; Pin Configuration for CoreS3 SE + LAN Module 13.2:
;   W5500 CS:   GPIO1
;   W5500 RST:  GPIO0
;   W5500 INT:  GPIO10
;
; Known Issues:
;   - GPIO14 conflict: If using W5500 INT on GPIO14, disable internal mic
;   - SPI bus sharing: Display and W5500 may conflict if not managed properly
;   - SPI clock: Reduce to 8MHz if experiencing connection issues
;
; CoreS3 SE vs CoreS3:
;   - No camera (GC0308)
;   - No proximity sensor (LTR-553ALS)
;   - No IMU (BMI270)
;   - No magnetometer (BMM150)
;   - No battery (500mAh)
;
; Library Notes:
;   - M5CoreS3 library is DEPRECATED - use M5Unified + M5GFX instead
;   - M5_Ethernet is preferred over standard Arduino Ethernet library
